"use strict";(self["webpackChunkweweb_front"]=self["webpackChunkweweb_front"]||[]).push([[598],{3446:(e,t,n)=>{n.d(t,{Z:()=>u});var i=n(6252),o=n(3577);const a={role:"navigation"},s=["aria-current","onClick"];function l(e,t,n,l,r,c){const d=(0,i.up)("wwObject"),u=(0,i.up)("wwElement",!0),p=(0,i.up)("wwLayoutItemContext");return(0,i.wg)(),(0,i.iD)("nav",a,[(0,i._)("ul",null,[(0,i._)("li",{class:(0,o.C_)({"hide-icon":!c.isEditing&&0===c.currentPage}),onClick:t[0]||(t[0]=(...e)=>c.prev&&c.prev(...e))},[n.content.paginatorPrev?((0,i.wg)(),(0,i.j4)(d,(0,o.vs)((0,i.dG)({key:0},n.content.paginatorPrev)),null,16)):(0,i.kq)("",!0)],2),n.content.paginatorText?((0,i.wg)(!0),(0,i.iD)(i.HY,{key:0},(0,i.Ko)(c.navigation,((e,t)=>((0,i.wg)(),(0,i.iD)("li",{key:t,"aria-current":e.index===c.currentPage,onClick:t=>c.goTo(e.index)},[(0,i.Wm)(p,{"is-repeat":"",index:t},{default:(0,i.w5)((()=>[(0,i.Wm)(u,(0,i.dG)(n.content.paginatorText,{"ww-props":{text:e.label},states:e.states}),null,16,["ww-props","states"])])),_:2},1032,["index"])],8,s)))),128)):(0,i.kq)("",!0),(0,i._)("li",{class:(0,o.C_)({"hide-icon":!c.isEditing&&c.currentPage===c.nbPage-1}),onClick:t[1]||(t[1]=(...e)=>c.next&&c.next(...e))},[n.content.paginatorNext?((0,i.wg)(),(0,i.j4)(d,(0,o.vs)((0,i.dG)({key:0},n.content.paginatorNext)),null,16)):(0,i.kq)("",!0)],2)])])}var r={props:{content:{type:Object,required:!0}},emits:["trigger-event","update:content"],watch:{"content.useCustomPagination"(e){e&&this.$emit("update:content",{collectionId:null})}},computed:{isEditing(){return!1},paginationOptions(){return this.content.useCustomPagination?{limit:this.content.paginatorLimit,offset:this.content.paginatorOffset,total:this.content.paginatorTotal}:this.content.collectionId?wwLib.wwCollection.getPaginationOptions(this.content.collectionId):null},nbPage(){if(!this.paginationOptions)return 10;const e=Math.ceil(this.paginationOptions.total/this.paginationOptions.limit);return isNaN(e)?1:e},currentPage(){if(!this.paginationOptions)return 1;const e=Math.floor(this.paginationOptions.offset/this.paginationOptions.limit);return isNaN(e)?0:e},navigation(){const e=this.nbPage-1,t=this.currentPage-1,n=this.currentPage+1;let i=0,o=[];return o.push({label:"1",index:0,states:0===this.currentPage?["active"]:[]}),t>i&&(t>i+1&&o.push({label:"...",index:-1}),o.push({label:`${t+1}`,index:t}),i=t),0!==this.currentPage&&this.currentPage!==e&&(o.push({label:`${this.currentPage+1}`,index:this.currentPage,states:["active"]}),i=this.currentPage),n<e&&n>i&&(o.push({label:`${n+1}`,index:n}),i=n,n<e-1&&o.push({label:"...",index:-1})),e>i&&o.push({label:`${e+1}`,index:e,states:e===this.currentPage?["active"]:[]}),o}},methods:{goTo(e){this.paginationOptions&&-1!==e&&e!==this.currentPage&&(this.content.useCustomPagination||wwLib.wwCollection.setOffset(this.content.collectionId,e*this.paginationOptions.limit),this.$emit("trigger-event",{name:"change",event:{context:{offset:e*this.paginationOptions.limit,page:e+1,total:this.paginationOptions.total,limit:this.paginationOptions.limit}}}))},prev(){this.currentPage>0&&this.goTo(this.currentPage-1)},next(){this.currentPage<this.nbPage-1&&this.goTo(this.currentPage+1)}}},c=n(3744);const d=(0,c.Z)(r,[["render",l],["__scopeId","data-v-7f7de0bd"]]);var u=d},5885:(e,t,n)=>{n.d(t,{Z:()=>c});var i=n(6252);const o=["value","name","required","readonly","multiple","accept"];function a(e,t,n,a,s,l){const r=(0,i.up)("wwElement",!0);return(0,i.wg)(),(0,i.iD)("div",{class:"ww-input-file",onClick:t[1]||(t[1]=(...e)=>l.openFileExplorer&&l.openFileExplorer(...e))},[(0,i.Wm)(r,(0,i.dG)({class:"ww-input-file__button"},n.content.button),null,16),(0,i.Wm)(r,(0,i.dG)({class:"ww-input-file__text"},n.content.text,{"ww-props":{text:s.fileName||"No file chosen"}}),null,16,["ww-props"]),(0,i._)("input",{ref:"inputFile",value:s.localValue,class:"ww-input-file__input",type:"file",name:n.wwElementState.name,required:n.content.required,readonly:l.isReadonly,multiple:n.content.multiple,accept:l.accept,onInput:t[0]||(t[0]=e=>l.handleManualInput(e))},null,40,o)])}var s={props:{content:{type:Object,required:!0},uid:{type:String,required:!0},wwElementState:{type:Object,required:!0}},emits:["trigger-event","add-state","remove-state"],setup(e){const{value:t,setValue:n}=wwLib.wwVariable.useComponentVariable({uid:e.uid,name:"value",defaultValue:null,componentType:"element",type:"file",readonly:!0,resettable:!0});return wwLib.wwVariable.useComponentVariable({uid:e.uid,name:"progress",defaultValue:0,componentType:"element",type:"number",readonly:!0}),{variableValue:t,setValue:n}},data(){return{localValue:null,fileName:null}},computed:{isEditing(){return!1},value(){return this.variableValue},accept(){switch(this.content.accept){case"image":return"image/*";case"video":return"video/*";case"audio":return"audio/*";case"pdf":return".pdf";case"csv":return".csv";case"excel":return".xls,.xlsb,.xlsm,.xlsx";case"word":return".doc,.docm,.docx";case"json":return".json";case"custom":return this.content.acceptCustom;case"any":default:return""}},isReadonly(){return void 0===this.wwElementState.props.readonly?this.content.readonly:this.wwElementState.props.readonly}},watch:{variableValue(e){null===e&&(this.localValue=null,this.fileName=null)},isReadonly:{immediate:!0,handler(e){e?this.$emit("add-state","readonly"):this.$emit("remove-state","readonly")}}},methods:{handleManualInput(e){const t=e.target.value;if(t===this.localValue)return;const n=this.content.multiple,i=this.$refs["inputFile"].files;i&&i.length&&(this.localValue=t,this.fileName=i.length>1?`${i.length} files`:i[0].name,this.setValue(n?i:i[0]),this.$emit("trigger-event",{name:"change",event:{domEvent:e,value:n?i:i[0]}}))},openFileExplorer(){this.isEditing||this.isReadonly||this.$refs["inputFile"].click()}}},l=n(3744);const r=(0,l.Z)(s,[["render",a],["__scopeId","data-v-162385b6"]]);var c=r},3169:(e,t,n)=>{n.r(t);var i=n(7470),o=n(259),a=n(8749),s=n(7384),l=n(3446),r=n(2228),c=n(8910),d=n(3457),u=n(9624),p=n(9841),h=n(7712),m=n(5022),g=n(3914),w=n(1372),b=n(6252),y=n(3577),f=n(9963);function v(e,t,n,i,o,a){const s=(0,b.up)("wwElement",!0),l=(0,b.up)("OptionItemSelected"),r=(0,b.up)("wwLayoutItemContext"),c=(0,b.up)("OptionItem"),d=(0,b.up)("Multiselect");return(0,b.wg)(),(0,b.j4)(d,(0,b.dG)({ref:"multiselect",modelValue:a.internalValue,"onUpdate:modelValue":t[1]||(t[1]=e=>a.internalValue=e),key:e.componentKey,class:["input-multiselect",{editing:a.isEditing}],style:a.cssVariables},a.multiselectProps,{onClose:a.verifyClose}),(0,b.Nv)({placeholder:(0,b.w5)((()=>[(0,b.Wm)(s,(0,b.dG)({class:"multiselect-placeholder-el"},n.content.placeholderElement,{wwProps:{text:a.placeholder||""}}),null,16,["wwProps"])])),tag:(0,b.w5)((({option:e,handleTagRemove:t})=>[(0,b._)("div",{class:"multiselect-tag",style:(0,y.j5)(a.getOptionStyle(e))},[(0,b.Wm)(r,{index:a.getOptionIndex(e),item:{},"is-repeat":"",data:e},{default:(0,b.w5)((()=>[((0,b.wg)(),(0,b.j4)(l,{key:a.getOptionIndex(e),option:e,layoutType:a.layoutType,selectedFlexboxElement:n.content.selectedFlexboxElement,tagElement:n.content.tagElementSelected,removeTagIconElement:n.content.removeTagIconElement,isReadOnly:a.isReadOnly,isEditing:a.isEditing,handleTagRemove:t},null,8,["option","layoutType","selectedFlexboxElement","tagElement","removeTagIconElement","isReadOnly","isEditing","handleTagRemove"]))])),_:2},1032,["index","data"])],4)])),caret:(0,b.w5)((()=>[a.multiselectProps.disabled&&a.internalValue.length&&n.content.clearIcon?((0,b.wg)(),(0,b.j4)(s,(0,b.dG)({key:0,class:"hidden"},n.content.clearIconElement),null,16)):(0,b.kq)("",!0),(0,b.Wm)(s,(0,b.dG)(n.content.caretIconElement,{class:["caret",{hidden:a.isReadOnly}]}),null,16,["class"])])),clear:(0,b.w5)((({clear:e})=>[(0,b._)("div",{onMousedown:t[0]||(t[0]=(0,f.iM)((()=>{}),["stop"]))},[(0,b.Wm)(s,(0,b.dG)(n.content.clearIconElement,{onClick:t=>a.isEditing?null:e(t)}),null,16,["onClick"])],32)])),_:2},["tags"===n.content.mode?{name:"option",fn:(0,b.w5)((({option:e})=>[(0,b.Wm)(r,{index:a.getOptionIndex(e),item:{},"is-repeat":"",data:e},{default:(0,b.w5)((()=>[(0,b.Wm)(c,{option:e,layoutType:a.layoutType,flexboxElement:n.content.flexboxElement,tagElement:n.content.tagElement,isReadOnly:a.isReadOnly,isEditing:a.isEditing},null,8,["option","layoutType","flexboxElement","tagElement","isReadOnly","isEditing"])])),_:2},1032,["index","data"])])),key:"0"}:void 0]),1040,["modelValue","style","class","onClose"])}var x=n(2085);function O(e,t,n,i,o,a){const s=(0,b.up)("wwElement");return"text"===n.layoutType?((0,b.wg)(),(0,b.j4)(s,(0,b.dG)({key:0,class:"multiselect-tag-el"},n.tagElement,{"ww-props":{text:n.option.label||""},states:o.optionStates}),null,16,["ww-props","states"])):((0,b.wg)(),(0,b.j4)(s,(0,b.dG)({key:1,class:"multiselect-tag-el free-layout"},n.flexboxElement,{states:o.optionStates}),null,16,["states"]))}var E={props:{content:{type:Object,required:!0},option:{type:Object,required:!0},layoutType:{type:String,required:!0},tagElement:{type:Object,required:!0},flexboxElement:{type:Object,required:!0},isReadOnly:{type:Boolean,required:!0}},data(){return{observer:null,optionStates:[]}},mounted(){const e=this.$el.parentElement;e&&(this.observer=new MutationObserver((e=>{for(const t of e){const e=t.target.getAttribute(t.attributeName);this.$nextTick((()=>{this.handleOptionState(e)}))}})),this.observer.observe(e,{attributes:!0,attributeOldValue:!0,attributeFilter:["class"]}))},methods:{handleOptionState(e){e&&"string"===typeof e&&(e.includes("is-pointed")&&!e.includes("is-selected")?this.optionStates=[":hover"]:!e.includes("is-pointed")&&e.includes("is-selected")?this.optionStates=["Selected"]:e.includes("is-pointed")&&e.includes("is-selected")?this.optionStates=["Selected:hover"]:this.optionStates=[])}},beforeUnmount(){this.observer&&this.observer.disconnect()}},S=n(3744);const T=(0,S.Z)(E,[["render",O]]);var V=T;function j(e,t,n,i,o,a){const s=(0,b.up)("wwElement");return"text"===n.layoutType?((0,b.wg)(),(0,b.iD)(b.HY,{key:0},[(0,b.Wm)(s,(0,b.dG)({class:"multiselect-tag-el"},n.tagElement,{"ww-props":{text:n.option.label||""},states:o.optionStates}),null,16,["ww-props","states"]),n.isReadOnly?(0,b.kq)("",!0):((0,b.wg)(),(0,b.j4)(s,(0,b.dG)({key:0,onMousedown:t[0]||(t[0]=(0,f.iM)((e=>n.isEditing?null:n.handleTagRemove(n.option,e)),["prevent"]))},n.removeTagIconElement),null,16))],64)):((0,b.wg)(),(0,b.j4)(s,(0,b.dG)({key:1,class:"multiselect-tag-el free-layout"},n.selectedFlexboxElement,{states:o.optionStates}),null,16,["states"]))}var Z={props:{content:{type:Object,required:!0},option:{type:Object,required:!0},layoutType:{type:String,required:!0},tagElement:{type:Object,required:!0},selectedFlexboxElement:{type:Object,required:!0},removeTagIconElement:{type:Object,required:!0},handleTagRemove:{type:Object,required:!0},isReadOnly:{type:Boolean,required:!0},isEditing:{type:Boolean,required:!0}},data(){return{observer:null,optionStates:[]}},mounted(){const e=this.$el.parentElement;e&&(this.observer=new MutationObserver((e=>{for(const t of e){const e=t.target.getAttribute(t.attributeName);this.$nextTick((()=>{this.handleOptionState(e)}))}})),this.observer.observe(e,{attributes:!0,attributeOldValue:!0,attributeFilter:["class"]}))},methods:{handleOptionState(e){e&&"string"===typeof e&&(e.includes("is-pointed")&&!e.includes("is-selected")?this.optionStates=[":hover"]:!e.includes("is-pointed")&&e.includes("is-selected")?this.optionStates=["Selected"]:e.includes("is-pointed")&&e.includes("is-selected")?this.optionStates=["Selected:hover"]:this.optionStates=[])}},beforeUnmount(){this.observer&&this.observer.disconnect()}};const C=(0,S.Z)(Z,[["render",j]]);var P=C;const k="label",I="value";var q={components:{Multiselect:x.Z,OptionItem:V,OptionItemSelected:P},emits:["trigger-event","update:content:effect","add-state","remove-state"],props:{uid:{type:String,required:!0},content:{type:Object,required:!0},wwElementState:{type:Object,required:!0}},setup(e,{emit:t}){const{value:n,setValue:i}=wwLib.wwVariable.useComponentVariable({uid:e.uid,name:"currentSelection",type:"array",defaultValue:(0,b.Fl)((()=>Array.isArray(e.content.initialValue)?e.content.initialValue:[]))}),o=(0,b.f3)("componentStyle"),a=(0,b.Fl)((()=>o.cursor));return{currentSelection:n,setCurrentSelection:i,cursor:a}},data:()=>({options:[],componentKey:0}),created(){this.init()},computed:{currentLang(){return wwLib.wwLang.lang},isEditing(){return!1},layoutType(){return this.content.layoutType?this.content.layoutType:"text"},multiselectProps(){return{options:[...new Map(this.options.map((e=>[e.value,e]))).values()],closeOnSelect:this.content.closeOnSelect,searchable:this.content.searchable,mode:this.content.mode,multipleLabel:e=>(wwLib.wwLang.getText(this.content.multipleLabel)||`{count} option${1===e.length?"":"s"} selected`).replace("{count}",e.length),noOptionsText:this.content.noOptionsText,noResultsText:this.content.noResultsText,disabled:this.isReadOnly||this.content.disabled,required:this.content.required,hideSelected:this.content.hideSelected,placeholder:"placeholder",createOption:this.content.allowCreation,canClear:this.content.clearIcon,caret:this.content.caretIcon,name:this.wwElementState.name,infinite:this.content.infiniteScroll,limit:this.content.limitedOptions?this.content.limit:-1,max:this.content.maxSelection?this.content.max:-1,resolveOnLoad:!1,locale:this.currentLang}},internalValue:{get(){return Array.isArray(this.currentSelection)?this.currentSelection:[]},set(e){this.setCurrentSelection(e),this.$emit("trigger-event",{name:"change",event:{domEvent:{},value:e}})}},placeholder(){return wwLib.wwLang.getText(this.content.placeholder)},defaultTagStyle(){return"text"===this.layoutType?{backgroundColor:this.content.tagsDefaultBgColor,color:this.content.tagsDefaultTextColor}:{backgroundColor:"transparent"}},cssVariables(){return{"--ms-dropdown-bg":this.content.dropdownBackgroundColor,"--ms-dropdown-border-width":this.content.dropdownBorderWidth||"0px","--ms-dropdown-border-color":this.content.dropdownBorderColor,"--ms-dropdown-radius":this.content.dropdownBorderRadius||"0px","--ms-max-height":this.content.dropdownMaxHeight||"10rem","--ms-option-bg-pointed":this.content.optionBackgroundPointed,"--ms-option-bg-selected":this.content.optionBackgroundSelected,"--ms-option-bg-selected-pointed":this.content.optionBackgroundSelectedPointed,"--ms-bg-disabled":this.isReadOnly?"transparent":null,"--ms-bg":"transparent","--ms-radius":"0","--ms-spinner-color":this.content.loadingRingColor,"--search-font-size":this.content.searchFontSize||"inherit","--search-font-family":this.content.searchFontFamily||"inherit","--search-font-color":this.content.searchFontColor||"inherit","--component-cursor":this.cursor||"pointer","--padding-tag":"text"===this.content.layoutType?"4px":"0"}},isReadOnly(){return void 0===this.wwElementState.props.readonly?this.content.readonly:this.wwElementState.props.readonly}},watch:{"content.initialValue"(){JSON.stringify(this.content.initialValue)!==JSON.stringify(this.internalValue)&&(this.refreshInitialValue(),this.$emit("trigger-event",{name:"initValueChange",event:{value:this.content.initialValue}}))},"content.options":{deep:!0,handler(){this.componentKey++,this.refreshOptions()}},internalValue(){this.refreshOptions()},"content.labelField"(){this.componentKey++,this.refreshOptions()},"content.valueField"(){this.componentKey++,this.refreshOptions()},"content.layoutType"(){this.componentKey++,this.refreshOptions()},isReadOnly:{immediate:!0,handler(e){e?this.$emit("add-state","readonly"):this.$emit("remove-state","readonly")}},"content.limit"(){this.componentKey+=1,this.$nextTick((()=>{this.init()}))},currentLang(){this.options=this.options.map((e=>this.formatOption(e.data))),this.componentKey++,this.refreshOptions()}},methods:{init(){const e=Array.isArray(this.content.options)?[...this.content.options]:[];if(this.options.push(...e.map((e=>this.formatOption(e)))),void 0!==this.content.initialValue){const e=Array.isArray(this.content.initialValue)?[...this.content.initialValue]:[];this.options.push(...e.filter((e=>!this.options.map((e=>e.value)).includes(e)))),this.setCurrentSelection(e)}},refreshOptions(){if(!this.options||!Array.isArray(this.options)||!this.internalValue||!Array.isArray(this.internalValue))throw new Error("options or internalValue is not an array");this.options=this.options.filter((e=>e&&this.internalValue.includes(e.value)));let e=[];this.content&&Array.isArray(this.content.options)&&(e=[...this.content.options]);const t=e.filter((e=>e&&!this.options.some((t=>t.value===e.value))));this.options.push(...t.map((e=>this.formatOption(e)))),this.options.push(...this.internalValue.filter((e=>e&&!this.options.some((t=>t.value===e)))))},refreshInitialValue(){const e=Array.isArray(this.content.initialValue)?[...this.content.initialValue]:[];this.options.push(...e.filter((e=>!this.options.map((e=>e.value)).includes(e)&&!this.currentSelection.includes(e)))),this.setCurrentSelection(e)},formatOption(e){let t=this.content.labelField||k;const n=this.content.valueField||I,i=`${wwLib.wwLang.getText(wwLib.resolveObjectPropertyPath(e,wwLib.wwLang.getText(t)))}`,o=wwLib.resolveObjectPropertyPath(e,n);return"free"===this.layoutType||"object"===typeof e?{label:i,value:o,data:e}:{label:e,value:e,data:e}},getOptionStyle(e){return"text"===this.layoutType?this.defaultTagStyle:null},handleOpening(e){this.$refs.multiselect&&(e?this.$refs.multiselect.open():this.$refs.multiselect.close())},onTagSelected(e){e&&this.$refs.multiselect.open()},getOptionIndex(e){return this.options.indexOf(e)},checkIsOpen(){},verifyClose(){},getLabel(e,t){return`${wwLib.wwLang.getText(wwLib.resolveObjectPropertyPath(e,wwLib.wwLang.getText(t)))}`}}};const L=(0,S.Z)(q,[["render",v],["__scopeId","data-v-7a0e5136"]]);var $=L,R=n(5885),_=n(1841),F=n(5883),A=n(5710);i.Z.component("wwobject-6f8796b1-8273-498d-95fc-7013b7c63214",o.Z),i.Z.component("wwobject-83d890fb-84f9-4386-b459-fb4be89a8e15",a.Z),i.Z.component("wwobject-d7904e9d-fc9a-4d80-9e32-728e097879ad",s.Z),i.Z.component("wwobject-88ef76b6-46d5-4685-878f-2f1fa0d54cb8",l.Z),i.Z.component("wwobject-aa27b26f-0686-4c29-98c5-8217044045b7",r.Z),i.Z.component("wwobject-734633a1-457d-4fe5-9eaa-773dddc755f1",c.Z),i.Z.component("wwobject-a36eacfa-16af-4363-858d-a03177f211d4",d.Z),i.Z.component("wwobject-af811adf-94d9-49dd-ab22-e2f29ae30299",u.Z),i.Z.component("wwobject-84bb3944-0404-4c4e-b0d5-058a63e4554a",p.Z),i.Z.component("wwobject-9c263ffe-7da7-45e7-832c-543aef56faef",h.Z),i.Z.component("wwobject-3a7d6379-12d3-4387-98ff-b332bb492a63",m.Z),i.Z.component("wwobject-b783dc65-d528-4f74-8c14-e27c934c39b1",g.Z),i.Z.component("wwobject-69d0b3ef-b265-494c-8cd1-874da4aa1834",w.Z),i.Z.component("wwobject-2d18ef4c-e9e5-4dc6-a29d-01d9f797be5e",$),i.Z.component("wwobject-9202d35c-2813-45bc-a7f3-0adb85f83e5e",R.Z),i.Z.component("wwobject-aeb78b9a-6fb6-4c49-931d-faedcfad67ba",_.Z),i.Z.component("section-99586bd3-2b15-4d6b-a025-6a50d07ca845",F.Z),i.Z.component("section-ef0ecc71-9a59-4eab-94b0-b36d66d3d61d",A.Z)}}]);