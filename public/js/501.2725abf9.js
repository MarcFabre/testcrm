"use strict";(self["webpackChunkweweb_front"]=self["webpackChunkweweb_front"]||[]).push([[501],{8910:(e,t,n)=>{n.d(t,{Z:()=>H});var i=n(6252),o=n(3577);const l={key:0},d={key:0},s={class:"columnHeader"},r={key:0},c={class:"columnHeader"};function a(e,t,n,a,u,m){const h=(0,i.up)("wwElement",!0),w=(0,i.up)("DataGridRow"),p=(0,i.up)("wwLayout");return(0,i.wg)(),(0,i.iD)("table",{class:(0,o.C_)(["ww-data-grid",{sticky:n.content.hasStickyHeader}]),style:(0,o.j5)(m.cssVars),cellpadding:"0",cellspacing:"0"},[(0,i._)("colgroup",null,[n.content.selectable?((0,i.wg)(),(0,i.iD)("col",{key:0,style:(0,o.j5)({width:n.content.selectColumnWidth||"auto"})},null,4)):(0,i.kq)("",!0),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.content.columns,((e,t)=>((0,i.wg)(),(0,i.iD)(i.HY,{key:t},[e.display?((0,i.wg)(),(0,i.iD)("col",{key:0,style:(0,o.j5)({width:e.width||"auto"})},null,4)):(0,i.kq)("",!0)],64)))),128)),n.content.inlineEditing?((0,i.wg)(),(0,i.iD)("col",{key:1,style:(0,o.j5)({width:n.content.actionColumnWidth||"auto"})},null,4)):(0,i.kq)("",!0)]),n.content.displayHeader?((0,i.wg)(),(0,i.iD)("thead",l,[n.content.selectable?((0,i.wg)(),(0,i.iD)("th",d,[(0,i._)("div",s,[(0,i.Wm)(h,(0,o.vs)((0,i.F4)(n.content.headerTextSelectable)),null,16),(0,i.Wm)(h,(0,i.dG)(n.content.selectCheckbox,{states:m.isAllSelected?["checked"]:[],onClick:m.toggleAllSelection}),null,16,["states","onClick"])])])):(0,i.kq)("",!0),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.content.columns,((e,t)=>((0,i.wg)(),(0,i.iD)(i.HY,{key:t},[e.display?((0,i.wg)(),(0,i.iD)("th",r,[(0,i._)("div",c,[n.content.headerTextElements[e.id]?((0,i.wg)(),(0,i.j4)(h,{key:0,uid:n.content.headerTextElements[e.id].uid},null,8,["uid"])):(0,i.kq)("",!0),n.content.sortIcon&&e.sortable?((0,i.wg)(),(0,i.j4)(h,{key:1,uid:n.content.sortIcon.uid,class:(0,o.C_)({"-reversed":"DESC"===a.columnsSort.order&&a.columnsSort.name===(e.name||t)}),states:a.columnsSort.name===(e.name||t)?["active"]:"",onClick:n=>m.toggleSort(e,t)},null,8,["uid","class","states","onClick"])):(0,i.kq)("",!0)])])):(0,i.kq)("",!0)],64)))),128)),n.content.inlineEditing?((0,i.wg)(),(0,i.iD)("th",{key:1,style:(0,o.j5)({width:n.content.actionColumnWidth||"auto"})},[(0,i.Wm)(h,(0,o.vs)((0,i.F4)(n.content.headerTextActions)),null,16)],4)):(0,i.kq)("",!0)])):(0,i.kq)("",!0),(0,i.Wm)(p,{path:"data",tag:"tbody",class:"body","disable-edit":""},{default:(0,i.w5)((({index:o,data:l})=>[((0,i.wg)(),(0,i.j4)(w,{id:m.getRowId(l),key:m.getRowId(l,o),class:"grid-row",item:l,columns:n.content.columns,"columns-element":n.content.columnsElement,"editable-custom-columns-element":n.content.editableCustomColumnsElement,"is-edit-available":n.content.inlineEditing,edit:m.forcedInlineEditing&&0===o||n.content.inlineEditing&&void 0!==u.editingId&&m.getRowId(l)===u.editingId,"edit-container":n.content.editContainer,"editing-container":n.content.editingContainer,"select-checkbox":n.content.selectCheckbox,selectable:n.content.selectable,"is-selected":m.getIsSelected(m.getRowId(l)),"onUpdate:edit":e=>m.setEdit(e,m.getRowId(l)),"onUpdate:row":t[0]||(t[0]=t=>e.$emit("trigger-event",{name:"update:row",event:t})),"onDelete:row":t[1]||(t[1]=t=>e.$emit("trigger-event",{name:"delete:row",event:t})),"onUpdate:isSelected":e=>m.updateRowSelection(e,l,m.getRowId(l))},null,8,["id","item","columns","columns-element","editable-custom-columns-element","is-edit-available","edit","edit-container","editing-container","select-checkbox","selectable","is-selected","onUpdate:edit","onUpdate:isSelected"]))])),_:1})],6)}var u=n(9963);const m={key:0},h=["id"],w={key:1,class:"message ww-typo-sub-text flex items-center"};function p(e,t,n,l,d,s){const r=(0,i.up)("wwElement"),c=(0,i.up)("DataGridCell"),a=(0,i.up)("DataGridActionCell");return(0,i.wg)(),(0,i.iD)("tr",{class:(0,o.C_)({bgSelected:n.isSelected})},[n.selectable?((0,i.wg)(),(0,i.iD)("td",m,[(0,i.Wm)(r,(0,i.dG)(n.selectCheckbox,{states:n.isSelected?["checked"]:[],onClick:t[0]||(t[0]=t=>e.$emit("update:is-selected",!n.isSelected))}),null,16,["states"])])):(0,i.kq)("",!0),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.columns,((e,o)=>((0,i.wg)(),(0,i.iD)(i.HY,{key:e.id},[e.display?((0,i.wg)(),(0,i.j4)(c,{key:0,ref_for:!0,ref:t=>s.registerCellRef(e.id,t),column:e,item:n.item,edit:e.editable&&n.edit,"columns-element":n.columnsElement,"editable-custom-columns-element":n.editableCustomColumnsElement,"row-unique-id":d.uniqueId},{default:(0,i.w5)((()=>[e.editable&&n.edit&&0===o?((0,i.wg)(),(0,i.iD)("form",{key:0,id:d.uniqueId,ref_for:!0,ref:"form",hidden:"",onSubmit:t[1]||(t[1]=(0,u.iM)(((...e)=>s.onSubmit&&s.onSubmit(...e)),["prevent"]))},null,40,h)):(0,i.kq)("",!0)])),_:2},1032,["column","item","edit","columns-element","editable-custom-columns-element","row-unique-id"])):(0,i.kq)("",!0)],64)))),128)),n.columns&&n.columns.length?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("span",w," Please define a column ")),n.isEditAvailable?((0,i.wg)(),(0,i.j4)(a,{key:2,id:n.id,"edit-container":n.editContainer,"editing-container":n.editingContainer,edit:n.edit,"onUpdate:edit":t[2]||(t[2]=t=>e.$emit("update:edit",t)),onValidate:s.onValidate,onDelete:s.onDelete,onCancel:s.onCancel},null,8,["id","edit-container","editing-container","edit","onValidate","onDelete","onCancel"])):(0,i.kq)("",!0)],2)}const g={class:"ww-data-grid-action-cell"};function y(e,t,n,o,l,d){const s=(0,i.up)("wwElement");return(0,i.wg)(),(0,i.iD)("td",null,[(0,i._)("div",g,[((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[(0,i.Wm)(s,(0,i.dG)({class:{"hide-container":n.edit}},n.editContainer,{"ww-props":{isFixed:!0},onElementEvent:d.onEditContainerEvent,"onUpdate:isSelected":d.onIsEditContainerSelected,"onUpdate:childSelected":d.onIsEditContainerSelected}),null,16,["class","onElementEvent","onUpdate:isSelected","onUpdate:childSelected"]),(0,i.Wm)(s,(0,i.dG)({class:{"hide-container":!n.edit}},n.editingContainer,{"ww-props":{isFixed:!0},onElementEvent:d.onEditingContainerEvent,"onUpdate:isSelected":d.onIsEditingContainerSelected,"onUpdate:childSelected":d.onIsEditingContainerSelected}),null,16,["class","onElementEvent","onUpdate:isSelected","onUpdate:childSelected"])],64))])])}var C={props:{id:{type:void 0,required:!0},editContainer:{type:Object,required:!0},editingContainer:{type:Object,required:!0},edit:{type:Boolean,default:!1}},emits:["update:edit","validate","delete","cancel"],methods:{onEditContainerEvent(e){"click"===e.type&&(0===e.index?this.$emit("update:edit",!this.edit):this.$emit("delete"))},onEditingContainerEvent(e){"click"===e.type&&(0===e.index?this.$emit("validate"):this.$emit("cancel"))},onIsEditContainerSelected(e){e&&this.edit&&this.$emit("update:edit",!1)},onIsEditingContainerSelected(e){e&&!this.edit&&this.$emit("update:edit",!0)}}},b=n(3744);const v=(0,b.Z)(C,[["render",y]]);var S=v;const k={class:"ww-data-grid-cell"};function E(e,t,n,o,l,d){const s=(0,i.up)("wwElement");return(0,i.wg)(),(0,i.iD)("td",k,[(0,i.WI)(e.$slots,"default"),d.element&&d.element.uid?((0,i.wg)(),(0,i.j4)(s,{key:0,"ww-props":{[d.isMultiSelect?"currentSelection":"value"]:o.internalValue,readonly:!n.edit,attributes:n.edit?{form:n.rowUniqueId}:{}},uid:d.element.uid,onElementEvent:d.onElementEvent},null,8,["ww-props","uid","onElementEvent"])):(0,i.kq)("",!0)])}var f=n(2262),B={expose:["internalValue","column","resetValue"],props:{column:{type:Object,required:!0},item:{type:Object,required:!0},columnsElement:{type:Object,required:!0},editableCustomColumnsElement:{type:Object,required:!0},edit:{type:Boolean,default:!1},rowUniqueId:{required:!0,type:String}},setup(e){const t=(0,i.Fl)((()=>{if(e.column)return _.get(e.item,e.column.path)})),n=(0,f.iH)(t.value),o=(0,f.iH)(t.value);return(0,i.YP)(t,(e=>{n.value=e})),(0,i.YP)((0,f.Vh)(e,"edit"),((e,n)=>{!n&&e&&(o.value=t.value)})),{setValue(e){n.value=e},internalValue:n,value:t,previousValue:o}},computed:{type(){return this.column?"custom"===this.column.type&&this.column.editable&&this.edit?this.column.editableType:this.column.type:null},element(){return this.column?"custom"===this.column.type&&this.column.editable&&this.edit&&this.editableCustomColumnsElement[this.column.id]?this.editableCustomColumnsElement[this.column.id]:this.columnsElement[this.column.id]:null},isMultiSelect(){return"multiselect"===this.type}},methods:{onElementEvent(e){"update:value"!==e.type&&"update:currentSelection"!==e.type||this.setValue(e.value)},resetValue(){this.internalValue=this.previousValue}}};const q=(0,b.Z)(B,[["render",E]]);var D=q,V={components:{DataGridActionCell:S,DataGridCell:D},props:{id:{type:void 0,required:!0},item:{type:Object,required:!0},columns:{type:Array,required:!0},columnsElement:{type:Object,required:!0},editableCustomColumnsElement:{type:Object,required:!0},isEditAvailable:{type:Boolean,default:!1},editContainer:{type:Object,required:!0},editingContainer:{type:Object,required:!0},selectCheckbox:{type:Object,required:!0},edit:{type:Boolean,default:!1},selectable:{type:Boolean,default:!1},isSelected:{type:Boolean,default:!1}},emits:["update:edit","update:row","delete:row","update:is-selected"],data(){return{cellRefs:{},uniqueId:`form-row-${wwLib.wwUtils.getUid()}`}},methods:{onSubmit(){const e=_.cloneDeep(this.item);Object.values(this.cellRefs).forEach((t=>{t.column&&"custom"!==t.column.type&&_.set(e,t.column&&t.column.path,_.cloneDeep(t.internalValue))})),this.$emit("update:row",{value:e,id:this.id,cancel:()=>{Object.values(this.cellRefs).forEach((e=>{e.resetValue()}))}}),this.$emit("update:edit",!1)},onValidate(){const e=Array.isArray(this.$refs.form)?this.$refs.form[0]:this.$refs.form;if(e){const t=e.checkValidity();t?this.onSubmit():e.reportValidity()}else this.onSubmit()},onDelete(){this.$emit("delete:row",{id:this.id,value:this.item})},onCancel(){Object.values(this.cellRefs).forEach((e=>{e.resetValue()})),this.$emit("update:edit",!1)},registerCellRef(e,t){t&&(this.cellRefs[e]=t)}}};const I=(0,b.Z)(V,[["render",p]]);var R=I,j={components:{DataGridRow:R},props:{content:{type:Object,required:!0},uid:{type:String,required:!0},wwFrontState:{type:Object,required:!0}},emits:["update:content","update:content:effect","trigger-event"],setup(e){const{value:t,setValue:n}=wwLib.wwVariable.useComponentVariable({uid:e.uid,name:"selectedRows",defaultValue:[],type:"Array",readonly:!0,resettable:!0}),{value:i,setValue:o}=wwLib.wwVariable.useComponentVariable({uid:e.uid,name:"sort",defaultValue:{name:null,order:"ASC"},type:"Object"});return{selectedRows:t,setSelectedRows:n,columnsSort:i,setColumnsSort:o}},data(){return{editingId:void 0}},computed:{isEditing(){return!1},cssVars(){return{"--headerBgColor":this.content.headerBackgroundColor,"--rowBgColor":this.content.rowBackgroundColor,"--rowBgColorAlt":this.content.alternateBackground?this.content.rowBackgroundColorAlt:this.content.rowBackgroundColor,...this.content.rowBackgroundColorHover?{"--rowBgColorHover":this.content.rowBackgroundColorHover}:{},...this.content.rowBackgroundColorSelected?{"--rowBgColorSelected":this.content.rowBackgroundColorSelected}:{},"--verticalAlignement":this.content.verticalAlignement,"--theadBordersVertical":this.content.isTheadBorderSplit?this.content.theadBordersVertical:this.content.theadBorders,"--theadBordersHorizontal":this.content.isTheadBorderSplit?this.content.theadBordersHorizontal:this.content.theadBorders,"--thBordersVertical":this.content.isThBorderSplit?this.content.thBordersVertical:this.content.thBorders,"--thBordersHorizontal":this.content.isThBorderSplit?this.content.thBordersHorizontal:this.content.thBorders,"--trBordersVertical":this.content.isTrBorderSplit?this.content.trBordersVertical:this.content.trBorders,"--trBordersHorizontal":this.content.isTrBorderSplit?this.content.trBordersHorizontal:this.content.trBorders,"--tdBordersVertical":this.content.isTdBorderSplit?this.content.tdBordersVertical:this.content.tdBorders,"--tdBordersHorizontal":this.content.isTdBorderSplit?this.content.tdBordersHorizontal:this.content.tdBorders}},forcedInlineEditing(){return!1},isAllSelected(){const e=wwLib.wwCollection.getCollectionData(this.content.data);return!!Array.isArray(e)&&e.every(((e,t)=>this.selectedRows.some((({id:n})=>n===this.getRowId(e,t)))))}},watch:{},methods:{getRowId(e,t){return _.get(e,this.content.dataIdPath,t)},setEdit(e,t){this.editingId=e?t:void 0},getIsSelected(e){return!!e&&(!!Array.isArray(this.selectedRows)&&this.selectedRows.some((t=>t&&t.id===e)))},updateRowSelection(e,t){const n=this.getRowId(t);if(!n)return;const i=this.getIsSelected(n);e&&!i?this.setSelectedRows([...this.selectedRows,{id:n,value:t}]):!e&&i&&this.setSelectedRows([...this.selectedRows].filter((e=>e&&e.id!==n)))},async toggleSort(e,t){if(!e.sortable)return;const n=e.name||t,i=n===this.columnsSort.name&&"ASC"===this.columnsSort.order?"DESC":"ASC";await this.setColumnsSort({name:n,key:e.path,order:i}),this.$emit("trigger-event",{name:"sort",event:{order:i,name:n}})},toggleAllSelection(){const e=wwLib.wwCollection.getCollectionData(this.content.data);Array.isArray(e)?this.isAllSelected?this.setSelectedRows([]):this.setSelectedRows(e.map((e=>({value:e,id:this.getRowId(e)})))):this.setSelectedRows([])}}};const A=(0,b.Z)(j,[["render",a],["__scopeId","data-v-9eda380c"]]);var H=A},9624:(e,t,n)=>{n.d(t,{Z:()=>c});var i=n(6252),o=n(3577);function l(e,t,n,l,d,s){return(0,i.wg)(),(0,i.iD)("div",{class:"ww-checkbox",style:(0,o.j5)(s.style)},[(0,i._)("div",{class:(0,o.C_)([n.content.icon]),"aria-hidden":"true"},null,2)],4)}var d={props:{content:{type:Object,required:!0}},computed:{style(){return{color:this.content.color,fontSize:`${this.content.fontSize}px`}}}},s=n(3744);const r=(0,s.Z)(d,[["render",l],["__scopeId","data-v-79ce76b3"]]);var c=r}}]);