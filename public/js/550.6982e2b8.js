"use strict";(self["webpackChunkweweb_front"]=self["webpackChunkweweb_front"]||[]).push([[550],{246:(__unused_webpack_module,__webpack_exports__)=>{__webpack_exports__.Z={props:{content:{type:Object,required:!0}},emits:["update:sidepanel-content","update:content:effect","trigger-event"],data(){return{designName:wwLib.wwWebsiteData.getWebsiteName(),state:"normal",remountKey:0,designId:wwLib.wwWebsiteData.getInfo().id,apiUrl:wwLib.wwApiRequests._getApiUrl()}},computed:{isEditing(){return!1},isSelected(){return!1},formState(){return this.state}},methods:{setState(e){this.state=e},getComputedData(e){switch(this.content.submitAction){case"weweb-email":return{designName:this.designName,recipients:this.content.wewebEmail.recipients,...e};case"airtable":return{records:[{fields:e}]};default:return e}},async submit(e){try{if("success"===this.formState||"loading"===this.formState)return;"none"!==this.content.submitAction&&this.setState("loading");const t={};for(const i of e.srcElement.elements){if("INPUT"===i.nodeName||"TEXTAREA"===i.nodeName||"SELECT"===i.nodeName)switch(i.type){case"number":t[i.name]=parseFloat(i.value);break;case"date":t[i.name]=new Date(i.value).toUTCString();break;case"checkbox":t[i.name]="on"===i.value;break;case"radio":t[i.name]=i.checked?i.value:t[i.name];break;default:t[i.name]=i.value;break}if(i.classList.contains("g-recaptcha-response")&&""===wwLib.getFrontWindow().grecaptcha.getResponse()){const e=wwLib.getFrontDocument().createElement("p");throw e.innerHTML="Invalid reCAPTCHA. Please try again",e.style.color="#ff0000",e.style.fontSize="12px",i.parentNode.appendChild(e),setTimeout((()=>{i.parentNode.removeChild(e)}),8e3),new Error}}for(const e of this.content.queries){const n=this.$route.query[e];n&&(t[e]=n)}const n=this.content.headers.reduce(((e,t)=>({...e,[t.key]:t.value})),{}),a={...this.content.data.reduce(((e,t)=>({...e,[t.key]:t.value})),{}),...this.getComputedData(t)};"none"!==this.content.submitAction&&await axios({method:this.content.method,url:"weweb-email"===this.content.submitAction?`${this.apiUrl}/design/${this.designId}/form/email`:this.content.url,data:a,headers:n}),this.$emit("trigger-event",{name:"submit",event:{formData:a}}),this.afterSubmitAction(),"none"!==this.content.submitAction&&this.setState("success")}catch(t){this.setState("error"),this.$emit("trigger-event",{name:"submit-error",event:{formError:t}}),this.afterErrorAction(),wwLib.wwLog.error(t)}},async afterSubmitAction(){switch(this.content.afterSubmitAction.type){case"link":return this.$refs.link.$el.click();case"custom-script":return eval(this.content.afterSubmitAction.customScript.code)}},async afterErrorAction(){switch(this.content.afterErrorAction.type){case"link":return this.$refs.link.$el.click();case"custom-script":return eval(this.content.afterErrorAction.customScript.code)}}}}},9953:(e,t,n)=>{n.d(t,{Z:()=>m});var a=n(6252),i=n(3577),r=n(9963);const o=["name","autocomplete"],s={class:"ww-form-container__relative"};function c(e,t,n,c,l,u){const d=(0,a.up)("wwLink"),m=(0,a.up)("wwLayout");return(0,a.wg)(),(0,a.iD)("form",{name:n.content.name,autocomplete:n.content.autocomplete?"on":"off",class:(0,i.C_)(["ww-form-container",[u.formState,{editing:u.isEditing,selected:u.isSelected}]]),"data-ww-flag":"form-container",onSubmit:t[0]||(t[0]=(0,r.iM)(((...e)=>u.submit&&u.submit(...e)),["prevent"]))},[(0,a.wy)((0,a.Wm)(d,{ref:"link","ww-link":n.content.afterSubmitAction.link},null,8,["ww-link"]),[[r.F8,!1]]),(0,a._)("div",s,[(0,a.Wm)(m,{class:(0,i.C_)([{hidden:"success"===u.formState},"ww-form-container__content -normal"]),path:"content"},null,8,["class"]),(0,a.Wm)(m,{class:(0,i.C_)([{hidden:"success"!==u.formState},"ww-form-container__content -success"]),path:"successContent"},null,8,["class"]),"error"===u.formState?((0,a.wg)(),(0,a.j4)(m,{key:0,class:"ww-form-container__content -error",path:"errorContent"})):(0,a.kq)("",!0)])],42,o)}var l=n(246),u=n(3744);const d=(0,u.Z)(l.Z,[["render",c],["__scopeId","data-v-1aa1e500"]]);var m=d},5885:(e,t,n)=>{n.d(t,{Z:()=>l});var a=n(6252);const i=["value","name","required","readonly","multiple","accept"];function r(e,t,n,r,o,s){const c=(0,a.up)("wwElement",!0);return(0,a.wg)(),(0,a.iD)("div",{class:"ww-input-file",onClick:t[1]||(t[1]=(...e)=>s.openFileExplorer&&s.openFileExplorer(...e))},[(0,a.Wm)(c,(0,a.dG)({class:"ww-input-file__button"},n.content.button),null,16),(0,a.Wm)(c,(0,a.dG)({class:"ww-input-file__text"},n.content.text,{"ww-props":{text:o.fileName||"No file chosen"}}),null,16,["ww-props"]),(0,a._)("input",{ref:"inputFile",value:o.localValue,class:"ww-input-file__input",type:"file",name:n.wwElementState.name,required:n.content.required,readonly:s.isReadonly,multiple:n.content.multiple,accept:s.accept,onInput:t[0]||(t[0]=e=>s.handleManualInput(e))},null,40,i)])}var o={props:{content:{type:Object,required:!0},uid:{type:String,required:!0},wwElementState:{type:Object,required:!0}},emits:["trigger-event","add-state","remove-state"],setup(e){const{value:t,setValue:n}=wwLib.wwVariable.useComponentVariable({uid:e.uid,name:"value",defaultValue:null,componentType:"element",type:"file",readonly:!0,resettable:!0});return wwLib.wwVariable.useComponentVariable({uid:e.uid,name:"progress",defaultValue:0,componentType:"element",type:"number",readonly:!0}),{variableValue:t,setValue:n}},data(){return{localValue:null,fileName:null}},computed:{isEditing(){return!1},value(){return this.variableValue},accept(){switch(this.content.accept){case"image":return"image/*";case"video":return"video/*";case"audio":return"audio/*";case"pdf":return".pdf";case"csv":return".csv";case"excel":return".xls,.xlsb,.xlsm,.xlsx";case"word":return".doc,.docm,.docx";case"json":return".json";case"custom":return this.content.acceptCustom;case"any":default:return""}},isReadonly(){return void 0===this.wwElementState.props.readonly?this.content.readonly:this.wwElementState.props.readonly}},watch:{variableValue(e){null===e&&(this.localValue=null,this.fileName=null)},isReadonly:{immediate:!0,handler(e){e?this.$emit("add-state","readonly"):this.$emit("remove-state","readonly")}}},methods:{handleManualInput(e){const t=e.target.value;if(t===this.localValue)return;const n=this.content.multiple,a=this.$refs["inputFile"].files;a&&a.length&&(this.localValue=t,this.fileName=a.length>1?`${a.length} files`:a[0].name,this.setValue(n?a:a[0]),this.$emit("trigger-event",{name:"change",event:{domEvent:e,value:n?a:a[0]}}))},openFileExplorer(){this.isEditing||this.isReadonly||this.$refs["inputFile"].click()}}},s=n(3744);const c=(0,s.Z)(o,[["render",r],["__scopeId","data-v-162385b6"]]);var l=c},3362:(e,t,n)=>{n.r(t);var a=n(7470),i=n(7384),r=n(259),o=n(8749),s=n(9953),c=n(1841),l=n(3914),u=n(5885),d=n(5022),m=n(5883),p=n(5710);a.Z.component("wwobject-d7904e9d-fc9a-4d80-9e32-728e097879ad",i.Z),a.Z.component("wwobject-6f8796b1-8273-498d-95fc-7013b7c63214",r.Z),a.Z.component("wwobject-83d890fb-84f9-4386-b459-fb4be89a8e15",o.Z),a.Z.component("wwobject-25edb26f-a365-4447-8de5-4964f9f7dc77",s.Z),a.Z.component("wwobject-aeb78b9a-6fb6-4c49-931d-faedcfad67ba",c.Z),a.Z.component("wwobject-b783dc65-d528-4f74-8c14-e27c934c39b1",l.Z),a.Z.component("wwobject-9202d35c-2813-45bc-a7f3-0adb85f83e5e",u.Z),a.Z.component("wwobject-3a7d6379-12d3-4387-98ff-b332bb492a63",d.Z),a.Z.component("section-99586bd3-2b15-4d6b-a025-6a50d07ca845",m.Z),a.Z.component("section-ef0ecc71-9a59-4eab-94b0-b36d66d3d61d",p.Z)}}]);